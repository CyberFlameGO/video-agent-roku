<?xml version="1.0" encoding="UTF-8"?>

<!--
**********************************************************
 NRTask.xml
 New Relic Agent background task.
 Minimum requirements: FW 7.2

 Copyright 2019 New Relic Inc. All Rights Reserved. 
**********************************************************
-->

<component name = "NRTask" extends = "Task">
	<script type = "text/brightscript" >
		<![CDATA[
		sub init()
  			m.top.functionName = "nrTaskMain"
		end sub
		
		function nrTaskMain()
			'We assume that parent node is NewRelicAgent
			m.nr = m.top.getParent()
			while true
				'TODO: provide a way to configure the hervest period
				sleep(10000)
				m.nr.callFunc("nrHarvest")
			end while
		end function
		]]>
	</script>
</component>
