<?xml version="1.0" encoding="UTF-8"?>

<!--
'**********************************************************
' NewRelicAgent.xml
' New Relic Agent for Roku.
'
' Copyright 2020 New Relic Inc. All Rights Reserved. 
'**********************************************************
-->

<component name="com.newrelic.NewRelicAgent" extends="Node" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://devtools.web.roku.com/schema/RokuSceneGraph.xsd">

	<interface>
		<!-- Properties -->
		<field id="version" type="string" value="0.22.0"/>
		<!-- Public Methods (wrapped) -->
        <function name="NewRelicInit" />
        <function name="NewRelicVideoStart" />
        <!-- Internal Methods (not wrapped, but used from the outside by some internal components) -->
        <function name="nrActivateLogging" />
        <function name="nrLog" />
        <function name="nrExtractEvent" />
        <function name="nrRecordEvent" />
    </interface>
    
	<!-- TODO: join both files into one -->
    <script type="text/brightscript" uri="pkg:/components/NewRelicAgent/NRUtils.brs"/>
	<script type="text/brightscript" uri="pkg:/components/NewRelicAgent/NRAgent.brs"/>
	
	<script type = "text/brightscript" >
		<![CDATA[
		sub init()
			m.nrAgentVersion = m.top.getField("version")
			print "********************************************************"
			print "   New Relic Agent for Roku v" + m.nrAgentVersion
			print "   Copyright 2020 New Relic Inc. All Rights Reserved."
			print "********************************************************"
		end sub
		]]>
	</script>
	
	<children>
		<!-- <com.newrelic.NewRelicAgent.NRTask id="nrTask"/> -->
		<Timer id="nrHarvestTimer" repeat="true" duration="10"/>
	</children>
</component>
